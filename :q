#include "EditorUI.h"
#include "../imgui/backends/imgui_impl_opengl3.h"
#include "../imgui/backends/imgui_impl_sdl2.h"
#include "SDL2/SDL.h"
#include "ComponentRegisterList.h"


void EditorUI::Init(SDL_Window* window, SDL_GLContext glContext, project& Proj){
  
    IMGUI_CHECKVERSION();
    ImGui::CreateContext();
    ImGuiIO& io = ImGui::GetIO(); (void)io;
    io.ConfigFlags |= ImGuiConfigFlags_DockingEnable;

    // Optional style tweaks
    ImGui::StyleColorsDark();
    ImGui::GetStyle().WindowRounding = 6.0f;
    ImGui::GetStyle().FrameRounding = 4.0f;

    ImGui_ImplSDL2_InitForOpenGL(window, glContext);
    ImGui_ImplOpenGL3_Init("#version 330");

    RegisterAllComponents();
    panels.push_back(std::make_unique<TestPanel>("Panel 1"));
    panels.push_back(std::make_unique<EntityList>("Scene List", Proj, Selection));
    panels.push_back(std::make_unique<Inspector>("Inspector", Proj, Selection));
    panels.push_back(std::make_unique<Viewport>("Viewport", Proj, Selection));

};

void EditorUI::Update(){};

void EditorUI::Render(){

    ImGui_ImplOpenGL3_NewFrame();
    ImGui_ImplSDL2_NewFrame();
    ImGui::NewFrame();

    ImGui::DockSpaceOverViewport();

    for (auto& panel : panels) {
        panel->Render();
    }

    ImGui::Render();
    ImGui_ImplOpenGL3_RenderDrawData(ImGui::GetDrawData());
};


